# Model Results Checker Web App
This project is build by TU Delft students as part of the Software Project. This project is to develop a software that helps label and classify bounding boxes annotated on a video.   

## Prerequisites
- docker
- minimum of 8gb Ram
- mkcert
- chocolatey
- minimum of 20gb space
- only supports _HTTPS_
- supports self signed certificate
- certificate must be named as cert.pem and private key as key.pem
- azure Blob Storage for video storage
- azure AAD for authentication
- client uses cert.pem and key.pem for ssl verification
- server uses p12 certificate with PKCS12 format for ssl verification

### How to generate self-signed certificates(LocalHost)?
- You can use mkcert to make self-signed signatures
- Run powershell or bash as admin and execute the following command in the root folder of project:
 ```
 mkcert -key-file ./cert/key.pem -cert-file ./cert/cert.pem "localhost"
 ```

### How to install mkcert?
- Run a docker container using https://hub.docker.com/r/vishnunair/docker-mkcert/dockerfile with a bind mount to cert in root folder.
- You may also use chocolatey to run:
 ```
choco install mkcert
mkcert -install
 ```

### How to generate domain.p12
- Run powershell or bash as admin and execute the following command:
 ```
 mkcert -pkcs12 localhost
 ```

### How to install chocolatey?
- Follow the instructions on https://chocolatey.org/install

### How to include different certificates other than the Default?
- Overwrite the cert folder of server, with the certificates
- Edit production script of package.json as such:
```
 "production": "serve -s build -l 3000 --ssl-cert ./.cert/<cert> --ssl-key ./.cert/<key>",
 ```
- Rebuild the image with the latest tag, and re-run docker compose up
(Note that the default client image is named as recycleeyesnapshot/client)

## Installation
- Clone the repository to your local environment or download the zipped repository.
- Run Docker Desktop.
- Create a new directory called cert in the root path.
- Copy your certificate and private key to cert folder.
- Copy the localhost.p12 to the source folder of the server


### Run in production mode(LocalHost):
- Run docker compose up.
- Wait for all services to be up.
- Browse to https://localhost:3000 (Default port on react)

### Run in development mode(LocalHost):
- Clone both the client and server repository
- On server: run gradle Bootrun
- On client
    - 1) Create a folder called .cert in app folder
            - 2) Copy the respective certificates to the .cert folder(cert.pem, key.pem)
            - 3) Run npm start


### Testing
```
gradle test
```


A coverage report is generated by:
```
gradle jacocoTestCoverageVerification
```

And
```
gradle jacocoTestReport
```
The coverage report is generated in: build/reports/jacoco/test/html, which does not get pushed to the repo. Open index.html in your browser to see the report.
The overall coverage is 80%.

### Static analysis
```
gradle checkStyleMain
gradle checkStyleTest
gradle pmdMain
gradle pmdTest
```


